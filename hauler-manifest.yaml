# Hauler Manifest for ESS Demo
# This manifest is AUTO-GENERATED from the ESS Helm chart values
# DO NOT EDIT MANUALLY - Run 'build/generate-hauler-manifest.sh' to regenerate
# Usage: hauler store sync --files hauler-manifest.yaml

apiVersion: content.hauler.cattle.io/v1alpha1
kind: Images
metadata:
  name: ess-demo-images
spec:
  images:
  # K3s Runtime Images
    - name: rancher/klipper-helm:v0.9.8-build20250709
    - name: rancher/klipper-lb:v0.4.13
    - name: rancher/local-path-provisioner:v0.0.31
    - name: rancher/mirrored-coredns-coredns:1.12.3
    - name: rancher/mirrored-library-busybox:1.36.1
    - name: rancher/mirrored-library-traefik:3.3.6
    - name: rancher/mirrored-metrics-server:v0.8.0
    - name: rancher/mirrored-pause:3.6

  # NGINX Ingress Controller (infrastructure dependency)
    - name: registry.k8s.io/ingress-nginx/controller:v1.9.4
    - name: registry.k8s.io/ingress-nginx/kube-webhook-certgen:v20231011-8b53cabe0

    # ESS Component Images (extracted from Helm chart)
    - name: docker.io/haproxy:3.2-alpine
    - name: docker.io/livekit/livekit-server:v1.9.1
    - name: docker.io/postgres:17-alpine
    - name: docker.io/prometheuscommunity/postgres-exporter:v0.18.1
    - name: docker.io/redis:7.4-alpine
    - name: ghcr.io/element-hq/element-web:v1.12.3
    - name: ghcr.io/element-hq/ess-helm/matrix-tools:0.5.6
    - name: ghcr.io/element-hq/lk-jwt-service:0.3.0
    - name: ghcr.io/element-hq/matrix-authentication-service:1.5.0
    - name: ghcr.io/element-hq/matrix-authentication-service:1.5.0-debug
    - name: ghcr.io/element-hq/synapse:v1.141.0
    - name: oci.element.io/element-admin:0.1.8

---
apiVersion: content.hauler.cattle.io/v1alpha1
kind: Charts
metadata:
  name: ess-demo-charts
spec:
  charts:
    # ESS Helm Chart
    - name: matrix-stack
      repoURL: oci://ghcr.io/element-hq/ess-helm
      version: latest

    # NGINX Ingress Helm Chart
    - name: ingress-nginx
      repoURL: https://kubernetes.github.io/ingress-nginx
      version: 4.8.3

---
apiVersion: content.hauler.cattle.io/v1alpha1
kind: Files
metadata:
  name: ess-demo-files
spec:
  files:
    # K3s Installation and Airgap Images
    - path: https://raw.githubusercontent.com/k3s-io/k3s/refs/heads/release-1.33/install.sh
      name: k3s-install.sh
    - path: https://github.com/k3s-io/k3s/releases/download/v1.33.5%2Bk3s1/k3s
      name: k3s-amd64
    - path: https://github.com/k3s-io/k3s/releases/download/v1.33.5%2Bk3s1/k3s-arm64
      name: k3s-arm64
    - path: https://github.com/k3s-io/k3s/releases/download/v1.33.5%2Bk3s1/k3s-airgap-images-amd64.tar.zst
      name: k3s-airgap-images-amd64.tar.zst
    - path: https://github.com/k3s-io/k3s/releases/download/v1.33.5%2Bk3s1/k3s-airgap-images-arm64.tar.zst
      name: k3s-airgap-images-arm64.tar.zst
    - path: https://github.com/k3s-io/k3s/releases/download/v1.33.5%2Bk3s1/sha256sum-amd64.txt
      name: k3s-sha256sum-amd64.txt
    - path: https://github.com/k3s-io/k3s/releases/download/v1.33.5%2Bk3s1/sha256sum-arm64.txt
      name: k3s-sha256sum-arm64.txt
    - path: https://github.com/k3s-io/k3s-selinux/releases/download/v1.6.latest.1/k3s-selinux-1.6-1.el9.noarch.rpm
      name: k3s-selinux-1.6-1.el9.noarch.rpm
    - path: https://github.com/k3s-io/k3s-selinux/releases/download/v1.6.latest.1/k3s-selinux-1.6-1.el9.noarch.rpm
      name: k3s-selinux-1.6-1.el8.noarch.rpm
    - path: https://github.com/k3s-io/k3s-selinux/releases/download/v1.6.latest.1/k3s-selinux-1.6-1.el9.noarch.rpm
      name: k3s-selinux-1.6-1.el7.noarch.rpm

    # kubectl binary
    - path: https://dl.k8s.io/release/v1.31.3/bin/linux/amd64/kubectl
      name: kubectl-linux-amd64
    - path: https://dl.k8s.io/release/v1.31.3/bin/darwin/arm64/kubectl
      name: kubectl-darwin-arm64

    # Helm binary
    - path: https://get.helm.sh/helm-v3.19.0-linux-amd64.tar.gz
      name: helm-linux-amd64.tar.gz
    - path: https://get.helm.sh/helm-v3.19.0-linux-arm64.tar.gz
      name: helm-linux-arm64.tar.gz
    - path: https://get.helm.sh/helm-v3.19.0-darwin-arm64.tar.gz
      name: helm-darwin-arm64.tar.gz

    # K9s binary
    - path: https://github.com/derailed/k9s/releases/download/v0.32.7/k9s_Linux_amd64.tar.gz
      name: k9s_Linux_amd64.tar.gz
    - path: https://github.com/derailed/k9s/releases/download/v0.32.7/k9s_Darwin_arm64.tar.gz
      name: k9s_Darwin_arm64.tar.gz

    # mkcert binary
    - path: https://github.com/FiloSottile/mkcert/releases/download/v1.4.4/mkcert-v1.4.4-linux-amd64
      name: mkcert-linux-amd64
    - path: https://github.com/FiloSottile/mkcert/releases/download/v1.4.4/mkcert-v1.4.4-darwin-arm64
      name: mkcert-darwin-arm64

    # Container Runtime Installers
    # Rancher Desktop for macOS
    - path: https://github.com/rancher-sandbox/rancher-desktop/releases/download/v1.16.0/Rancher.Desktop-1.16.0.aarch64.dmg
      name: Rancher.Desktop-arm64.dmg
    # macOS amd64 entries removed; only arm64 is supported
    
    # Rancher Desktop for Windows
    - path: https://github.com/rancher-sandbox/rancher-desktop/releases/download/v1.16.0/Rancher.Desktop.Setup.1.16.0.msi
      name: Rancher.Desktop.Setup.msi
